"use strict";(self.webpackChunkfreshCart=self.webpackChunkfreshCart||[]).push([[290],{5290:(h,m,i)=>{i.r(m),i.d(m,{CartComponent:()=>b});var u=i(6814),C=i(1120),t=i(4769),p=i(6286);function a(r,d){if(1&r){const e=t.EpF();t.TgZ(0,"div",11)(1,"div",12),t._UZ(2,"img",13),t.qZA(),t.TgZ(3,"div",14)(4,"div")(5,"h3",15),t._uU(6),t.qZA(),t.TgZ(7,"p",16),t._uU(8),t.qZA(),t.TgZ(9,"button",17),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.removeItem(o.product._id))}),t._UZ(10,"i",18),t._uU(11," Remove"),t.qZA()(),t.TgZ(12,"div")(13,"button",19),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.changeCount(o.count+1,o.product._id))}),t._uU(14," + "),t.qZA(),t.TgZ(15,"span"),t._uU(16),t.qZA(),t.TgZ(17,"button",19),t.NdJ("click",function(){const o=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.changeCount(o.count-1,o.product._id))}),t._uU(18," - "),t.qZA()()()()}if(2&r){const e=d.$implicit;t.xp6(2),t.Q6J("src",e.product.imageCover,t.LSH)("alt",e.product.title),t.xp6(4),t.Oqu(e.product.title),t.xp6(2),t.hij("",e.price," EGP"),t.xp6(8),t.Oqu(e.count)}}const g=function(r){return["/payment",r]};function c(r,d){if(1&r){const e=t.EpF();t.TgZ(0,"section",3)(1,"header",4)(2,"div")(3,"h1",5),t._uU(4," Cart Shop"),t.qZA(),t.TgZ(5,"p"),t._uU(6,"Total Price : "),t.TgZ(7,"span",6),t._uU(8),t.qZA(),t._uU(9," EGP "),t.qZA()(),t.TgZ(10,"div")(11,"button",7),t._uU(12,"Check out "),t.qZA()()(),t.TgZ(13,"div"),t.YNc(14,a,19,5,"div",8),t.qZA(),t.TgZ(15,"div",9)(16,"button",10),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.clear())}),t._uU(17,"Clear Your Cart"),t.qZA()()()}if(2&r){const e=t.oxw();t.xp6(8),t.Oqu(e.cartDetails.totalCartPrice),t.xp6(3),t.Q6J("routerLink",t.VKq(3,g,e.cartDetails._id)),t.xp6(3),t.Q6J("ngForOf",e.cartDetails.products)}}function _(r,d){1&r&&(t.TgZ(0,"h2",20),t._uU(1,"Your Cart Is Empty"),t.qZA())}let b=(()=>{class r{constructor(e){this._CartService=e,this.cartDetails=null}ngOnInit(){this._CartService.getCartUser().subscribe({next:e=>{this.cartDetails=e.data}})}removeItem(e){this._CartService.removeCartItem(e).subscribe({next:n=>{this.cartDetails=n.data,this._CartService.cartNumber.next(n.numOfCartItems)}})}changeCount(e,n){e>=1?this._CartService.updateCartCount(n,e).subscribe({next:s=>{console.log(s),this.cartDetails=s.data}}):this._CartService.removeCartItem(n).subscribe({next:s=>{this.cartDetails=s.data,this._CartService.cartNumber.next(s.numOfCartItems)}})}clear(){this._CartService.clearCart().subscribe({next:e=>{"success"==e.message&&(this.cartDetails=null,this._CartService.cartNumber.next(0))}})}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(p.N))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-cart"]],standalone:!0,features:[t.jDz],decls:4,vars:2,consts:[[1,"container"],["class","m-auto rounded shadow bg-main-light p-5 mb-3",4,"ngIf","ngIfElse"],["msg",""],[1,"m-auto","rounded","shadow","bg-main-light","p-5","mb-3"],[1,"d-flex","justify-content-between"],[1,"h2"],[1,"text-main"],[1,"btn","btn-info",3,"routerLink"],["class","row py-2 border-bottom",4,"ngFor","ngForOf"],[1,"my-3","text-center"],[1,"btn","btn-outline-success","py-2",3,"click"],[1,"row","py-2","border-bottom"],[1,"col-md-2"],[1,"w-100",3,"src","alt"],[1,"col-md-10","d-flex","align-items-center","justify-content-between"],[1,"h5"],[1,"mb-0"],[1,"btn","m-0","p-0","text-danger",3,"click"],[1,"fa-solid","fa-trash",2,"color","#e43307"],[1,"btn","btn-small","border-success","mx-3",3,"click"],[1,"text-center"]],template:function(n,s){if(1&n&&(t.TgZ(0,"div",0),t.YNc(1,c,18,5,"section",1),t.YNc(2,_,2,0,"ng-template",null,2,t.W1O),t.qZA()),2&n){const o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",s.cartDetails)("ngIfElse",o)}},dependencies:[u.ez,u.sg,u.O5,C.rH]})}return r})()},6286:(h,m,i)=>{i.d(m,{N:()=>p});var u=i(5619),C=i(4769),t=i(9862);let p=(()=>{class a{constructor(c){this._HttpClient=c,this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.cartNumber=new u.X(0)}addToCart(c){return this._HttpClient.post(this.baseUrl+"cart",{productId:c})}getCartUser(){return this._HttpClient.get(this.baseUrl+"cart")}removeCartItem(c){return this._HttpClient.delete(this.baseUrl+`cart/${c}`)}updateCartCount(c,_){return this._HttpClient.put(this.baseUrl+`cart/${c}`,{count:_})}clearCart(){return this._HttpClient.delete(this.baseUrl+"cart")}checkOut(c,_){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${c}?url=https://github.com/AsmaaAbdo20/FreshCart`,{shippingAddress:_})}static#t=this.\u0275fac=function(_){return new(_||a)(C.LFG(t.eN))};static#e=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);